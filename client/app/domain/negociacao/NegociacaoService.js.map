{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDoPeriodo","Promise","all","obterNegociacoesDaSemana","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","then","periodo","reduce","novoArray","item","concat","sort","a","b","data","getTime","catch","err","Error","get","dados","negociacoes","map","objeto","Date","quantidade","valor"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;AAC3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;AACDK,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKC,wBAAL,EADe,EAEf,KAAKC,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKNC,IALM,CAKDC,WAAWA,QAAQC,MAAR,CAAe,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CAApC,EAA4D,EAA5D,EAAgEE,IAAhE,CAAqE,CAACC,CAAD,EAAIC,CAAJ,KAASA,EAAEC,IAAF,CAAOC,OAAP,KAAmBH,EAAEE,IAAF,CAAOC,OAAP,EAAjG,CALV,EAMNC,KANM,CAMAC,OAAO;AACV,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBARM,CAAP;AASH;AACDhB,2CAA2B;AACvB,2BAAO,KAAKJ,KAAL,CAAWqB,GAAX,CAAe,oBAAf,EAAqCd,IAArC,CAA0Ce,SAAS;AACtD,8BAAMC,cAAcD,MAAME,GAAN,CAAUC,UAAU,IAAI5B,UAAJ,CAAe,IAAI6B,IAAJ,CAASD,OAAOT,IAAhB,CAAf,EAAsCS,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CAApB,CAApB;AACA,+BAAOL,WAAP;AACH,qBAHM,EAGJL,KAHI,CAGEC,OAAO;AACZ,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH,qBALM,CAAP;AAMH;;AAEDf,mDAAmC;AAC/B,2BAAO,KAAKL,KAAL,CAAWqB,GAAX,CAAe,sBAAf,EACNd,IADM,CACDe,SAASA,MAAME,GAAN,CAAUC,UAAU,IAAI5B,UAAJ,CAAe,IAAI6B,IAAJ,CAASD,OAAOT,IAAhB,CAAf,EAAsCS,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CAApB,CADR,EAENV,KAFM,CAEAC,OAAO;AACV,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBAJM,CAAP;AAKH;;AAEDd,oDAAoC;AAChC,2BAAO,KAAKN,KAAL,CAAWqB,GAAX,CAAe,uBAAf,EAAwCd,IAAxC,CAA6Ce,SAASA,MAAME,GAAN,CAAUC,UAAU,IAAI5B,UAAJ,CAAe,IAAI6B,IAAJ,CAASD,OAAOT,IAAhB,CAAf,EAAsCS,OAAOE,UAA7C,EAAyDF,OAAOG,KAAhE,CAApB,CAAtD,EACNV,KADM,CACAC,OAAO;AACV,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAHM,CAAP;AAKH;AAtC0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\r\nimport { Negociacao } from './Negociacao.js';\r\n\r\nexport class NegociacaoService {\r\n    constructor() {\r\n        this._http = new HttpService();\r\n    }\r\n    obterNegociacoesDoPeriodo() {\r\n        return Promise.all([\r\n            this.obterNegociacoesDaSemana(),\r\n            this.obterNegociacoesDaSemanaAnterior(),\r\n            this.obterNegociacoesDaSemanaRetrasada(),\r\n        ])\r\n        .then(periodo => periodo.reduce((novoArray, item) => novoArray.concat(item), []).sort((a, b)=> b.data.getTime() - a.data.getTime()))\r\n        .catch(err => {\r\n            throw new Error(\"Não foi possível obter as negociações do período\");\r\n        });\r\n    }\r\n    obterNegociacoesDaSemana() {\r\n        return this._http.get(\"negociacoes/semana\").then(dados => {\r\n            const negociacoes = dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor));\r\n            return negociacoes;\r\n        }).catch(err => {\r\n            throw new Error(\"Não foi possível obter as negociações\");\r\n        });\r\n    }\r\n\r\n    obterNegociacoesDaSemanaAnterior() {\r\n        return this._http.get(\"negociacoes/anterior\")\r\n        .then(dados => dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)))\r\n        .catch(err => {\r\n            throw new Error(\"Não foi possível obter as negociações da semana anterior\");\r\n        });\r\n    }\r\n\r\n    obterNegociacoesDaSemanaRetrasada() {\r\n        return this._http.get(\"negociacoes/retrasada\").then(dados => dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)))\r\n        .catch(err => {\r\n            throw new Error(\"Não foi possível obter as negociações\");\r\n        });\r\n\r\n    }\r\n}"]}